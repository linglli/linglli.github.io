<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Daisy Blog</title>
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/index.css">
    <link rel="alternate" type="application/rss+xml" title="Daisy Blog" href="/feed.xml">
    <script type="text/javascript" src="/assets/js/jquery-3.1.1.slim.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
        $('.nav-list li').hover(
            function() {
                $(this).find('.sub-menu').css('display', 'block');
            },
            function() {
                $(this).find('.sub-menu').css('display', 'none');
            }
        );
    });
</script>
</head>
    <body>
        <header class="site-header" role="banner">
    <div class="wrapper">
        <h1 class="site-title"><a href="/"><img src="/assets/image/portrait.jpg" alt="portrait"></a></h1>
        <nav class="site-nav">
            <ul class="nav-list">
                    <li><a href="/">Home</a></li>
                    <li><a href="/nav/project">Project</a></li>
                    <li><a href="/nav/technology">Technology</a>
                        <ul class="sub-menu">
                            <li><a href="/nav/java">Java</a></li>
                            <li><a href="/nav/designpattern">DesignPattern</a></li>
                            <li><a href="/nav/algorithm">Algorithm</a></li>
                        </ul>
                    </li>
                    <li><a href="/nav/life">Life</a>
                        <ul class="sub-menu">
                            <li><a href="/nav/reading">Reading</a></li>
                            <li><a href="/nav/food">Food</a></li>
                            <li><a href="/nav/journal">Journal</a></li>
                        </ul>
                    </li>
                    <li><a href="/nav/archive">Archive</a></li>
                    <li><a href="/nav/about">About</a></li>
                </ul>
        </nav>
    </div>
</header>
        <div class="wrapper">
            <div class="post-header">
    <h2>HashMap and HashTable</h2>
    <span class="post-meta">2016-10-13 21:19:46 +0800</span>
</div>
<p>一、HashMap and HashTable Difference</p>
<p>
1.Synchronization(Thread Safe)
当不需要多线程任务操作，可以选择HashMap, 效率高；
HashTable是线程安全，同步的</p>

<p>2.Null keys and values
HashMap允许one null key and multi-null values
HashTable不允许</p>

<p>3.Iterating values
HashMap使用iterator遍历，HashTable是除了vector外，唯一的使用enumerator遍历的</p>

<p>4.Fail fast iterator
HashMap: fail-fast iterator
HashTable: fail-save iterator
如果iterator created,改变hash table结构，(除了本身的remove)
会报ConcurrentModification Exception</p>
<p>5.Performance
在单线程任务的环境下，HashMap性能更好，而且利用更少的memory</p>

<p>6.Superclass and Legacy
Hashtable is subclass of Dictionary class which is now obsolete in jdk1.7
alternative way:
<p>1.synchronizing a hashMap</p>
<p>2.use a ConcurrentMap implementation(e.g ConcurrentHashMap)</p>

<p>HashMap is subclass of AbstractMap</p>

<p>Similarities:</p>
<p>1.不保证插入顺序</p>
<p>2.实现Map interface</p>
<p>3.constant time performance for put and get methods</p>
<p>4.works on the principle of Hashing</p>

<p>二、Iterator and Enumeration</p>
iterator is an interface<br/>
hasNext, next, remove,  forEachRemaining(jdk1.8)<br/>
(allow remove, friendly method name)<br/>
Enumeration is an interface<br/>
hasMoreElement, nextElement<br/>
for(int i = 0; i &lt; v.size(); i++) vs while(v.hasNext() || v.hasMoreElements())<br/>
–前者需要更多的操作<br/>
iterator on hashmap<br/>
Iterator iter = hashmap.entrySet().iterator(); //效率高<br/>
iterator iter = hashmap.keySet().iterator();   //先取entryset, 再按key取keySet<br/>
foreach vs while<br/>
在foreach中删除元素，会有异常（jdk1.5以后引入）<br/>

<p>三、HashMap and ConcurrentHashMap</p>
ConcurrentHashMap: thread-safe<br/>
lock on Map object: synchronizedMap(HashMap) —&gt; hashtable<br/>
ConcurrentHashMap synchronizes or locks on the certain portion of the Map
Map is divided into different partitions depending upon the concurrency level.<br/>
ConcurrentHashMap: not allow null values as well as null key
Performance

<p>四、How Hashmap works in Java</p>
Hash Function<br/>
Hash Value<br/>
Bucket<br/>

        </div>
        
<div class="duoshuo-comment">
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="/2016/10/13/HashMap and HashTable" data-title="HashMap and HashTable" data-url="http://localhost:4000/2016/10/13/HashMap-and-HashTable.html"></div>
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:"testjekyll"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
    <!-- 多说公共JS代码 end -->
</div>

<footer class="site-footer">
    <div class="rss-subscribe">subscribe <a href="/feed.xml">via RSS</a>
        <span>&nbsp;&nbsp;&nbsp;Copyright @ Daisy</span>
    </div>
</footer>
    </body>
</html>
